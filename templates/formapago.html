{% extends 'base.html' %} {% load static %}

{% block cuerpo %}
<div class="navbar navbar-light bg-light">
    <a href="{% url 'puntoventa' %}" class="navbar-brand btn btn-secondary"><i class="icon icon-left">&#xe806;</i> Regresar </a>

    <form class="form-inline">
        <a href="{% url 'jefe' %}" class="btn btn-secondary my-2 my-sm-0"><i class="icon icon-cancel">&#xe80c;</i>
            Cancelar </a>
    </form>
</div>
<div class="container">
    
</div>
<div class="row">

    <div class="col">
      
        <table class="table table-borderless">
            <thead class="thead-green">
              <tr>
                <th scope="col">Cantidad</th>
                <th scope="col">Descuento</th>
                <th scope="col">Precio</th>
                <th scope="col">Total</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th>Peinado</th>
                <td> </td>
                <td> </td>
                <td></td>
              </tr>
              <tr class="border-bottom border-dark">
                <td>1</td>
                <td>0%</td>
                <td>7000</td>
                <td>7000</td>
              </tr>
              <tr>
                <th>uñas</th>
                <td> </td>
                <td> </td>
                <td>  </td>
              </tr>
              <tr class="border-bottom border-dark">
                <td>1</td>
                <td>0%</td>
                <td>5000</td>
                <td>5000</td>
              </tr>
              <tr>
                <th>cejas</th>
                <td> </td>
                <td> </td>
                <td> </td>
              </tr>
              <tr class="border-bottom border-dark">
                <td>1</td>
                <td>0%</td>
                <td>8000</td>
                <td>8000</td>
              </tr>
            </tbody>
          </table>
          <div class="form-group row">
            <label for="subtotal" class="col-sm-2 col-form-label">Sub Total</label>
            <div class="col-sm-10">
              <input type="text" readonly class="form-control-plaintext text-right" id="subtotal" value="20000">
            </div>
          </div>
          <div class="form-group row">
            <label for="descuento" class="col-sm-2 col-form-label">Descuento</label>
            <div class="col-sm-10">
              <input type="text" readonly class="form-control-plaintext text-right" id="descuento" value="0.00">
            </div>
          </div>
          <div class="form-group row">
            <label for="impuesto" class="col-sm-2 col-form-label">Impuesto</label>
            <div class="col-sm-10">
              <input type="text" readonly class="form-control-plaintext text-right" id="impuesto" value="16%">
            </div>
          </div>
          <div class="form-group row">
            <label for="total" class="col-sm-2 col-form-label border border-success">Total</label>
            <div class="col-sm-10">
              <input type="text" readonly class="form-control-plaintext border border-success text-right" id="total" value="20000">
            </div>
          </div>
                
    </div>
  
    <div class="col">
      <div class="container rounded p-1">
        <div class="input-group mb-3">
            <div class="input-group-prepend">
              <label class="input-group-text" for="inputGroupSelect01">Total sin propina</label>
            </div>
            <input type="text" readonly class="form-control-plaintext border border-success text-right" id="totalapagar" value="20000">
            <div class="input-group-prepend">
              <label class="input-group-text" for="inputGroupSelect01">Forma de pago</label>
            </div>
            <select class="custom-select" id="Selectformapago">
              <option selected>Efectivo</option>
              <option>Tarjeta</option>
            </select>
        </div>
      </div>
      <div class="container-fluid" id="selefectivo">
        <input type="number" name="efectivo" id="efectivo" class="form-control">
      </div>
      <div class="container row mt-5">
          <div class="col">
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                  <label class="input-group-text" for="inputGroupSelect01">Facturación</label>
                </div>
                <select class="custom-select" id="Selectfacturacion">
                  <option selected>Si</option>
                  <option>No</option>
                </select>
            </div>
          </div>
        <div class="col">
            <textarea name="observaciones" id="observaciones" cols="10" rows="3" placeholder="Observaciones" class="form-control"></textarea>
        </div>
      </div>

      <div class="row mt-5">
        <div class="col-4"><button class="btn btn-success btn-lg">Terminar</button></div>
        <div class="col col col-lg-8">
          <div class="form-group row">
            <label for="staticEmail" class="col-sm-4 col-form-label">Propina</label>
            <div class="col-sm-8">
              <input type="number" readonly class="form-control-plaintext text-right" id="propina" value="0.0">
            </div>
          </div>
          <div class="form-group row">
            <label for="inputPassword" class="col-sm-4 col-form-label">Recibido</label>
            <div class="col-sm-8">
              <input type="number" readonly class="form-control-plaintext text-right" id="recibido" value="0.0">
            </div>
          </div>
          <div class="form-group row">
            <label for="inputPassword" class="col-sm-4 col-form-label">Saldo</label>
            <div class="col-sm-8">
              <input type="number" readonly class="form-control-plaintext text-right" id="saldo" value="20000">
            </div>
          </div>
          <div class="form-group row">
            <label for="inputPassword" class="col-sm-4 col-form-label">Cambio</label>
            <div class="col-sm-8">
              <input type="number" readonly class="form-control-plaintext text-right" id="cambio" value="0.0">  
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
  <script>
    let Selectformapago = document.getElementById('Selectformapago');
    let selefectivo = document.getElementById('selefectivo');
    let efectivo = document.getElementById('efectivo');
    let totalapagar = document.getElementById('totalapagar');
    let recibido = document.getElementById('recibido');
    let filarecibido = document.getElementById('filarecibido');
    let cambio = document.getElementById('cambio');
    let propina = document.getElementById('propina');
    let saldo = document.getElementById('saldo');

    propina.value = totalapagar.value*0.1;
    saldo.value = parseFloat(totalapagar.value) + parseFloat(propina.value);

    efectivo.addEventListener('keypress',function () {
      recibido.value = efectivo.value
      cambio.value = efectivo.value - saldo.value
      if (cambio.value < 0 ) {
        cambio.classList.add("text-danger")
      } else {
        if (cambio.classList.contains("text-danger")) {
          cambio.classList.remove("text-danger")
        }
      }
    });

    Selectformapago.addEventListener('click',function(){
      if (Selectformapago.value == 'Efectivo') {
        selefectivo.style.display = 'block';
        filarecibido.style.display ='flex'
      } else {
        if (Selectformapago.value == 'Tarjeta') {
          selefectivo.style.display = 'none';
          filarecibido.style.display = 'none';
        }
      }
    })
    
  </script>
{% endblock cuerpo %}
    